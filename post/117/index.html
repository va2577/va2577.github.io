<!DOCTYPE html>
<html><head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>HUGO のテーマを作ってみます 3(HOMEPAGE TEMPLATES) - Espresso &amp; Onigiri</title>
  <link rel="shortcut icon" href="/img/favicon.png" type="image/png">
  <link rel="apple-touch-icon" href="/img/apple-touch-icon.png">
  <link rel="stylesheet" href="/css/main.css">
</head>
<body><header>
  <ul>
    <li>
      <a href="/">
        
        <img src="/img/identicon.png" alt="icon">
        <span class="icon3">Espresso &amp; Onigiri</span>
      </a>
    </li>
    <li><a href="/post/">BLOG</a></li>
    <li><a href="/tags/">TAGS</a></li>
    <li><a href="/categories/">CATEGORIES</a></li>
    <li><a href="/about/">ABOUT</a></li>
    <li><a href="/privacy/">PRIVACY</a></li>
  </ul>
</header>
<style>
  header a {
    color: #2f495e;
  }
  header {
    align-items: center;
    border-bottom: #e2e8f0 solid 1px;
    display: flex;
    height: 92px;
    margin: 0px auto;
    width: 992px;
  }
  header > ul {
    align-items: center;
    display: flex;
    flex-direction: row;
    flex-wrap: wrap;
    justify-content: space-between;
    list-style-type: none;
    margin: 0px;
    padding: 0px;
    width: 100%;
  }
  header > ul > li:first-child > a {
    align-items: center;
    display: flex;
  }
  header .icon2 {
    font-size: 40px;
    color: #00c58e;
    margin-bottom: 10px;
  }
  header .icon3 {
    color: #2f495e;
    font-size: 24px;
    margin-left: 6px;
  }
  header img {
    display: inline-block;
    height: 40px;
    width: 40px;
  }
  @media screen and (max-width: 992px) {
    header {
      width: 640px;
    }
  }
</style>
<div id="content">
  <main>
    <h1>Hugo のテーマを作ってみます 3(Homepage Templates)</h1>
    
      <div><time>March 28, 2018</time></div>
    
    
    <article>
      
        <aside class="ads">
  <div>広告</div>
  <div>
    <script async="" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

    <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9305907051774965" data-ad-slot="2028899530" data-ad-format="auto"></ins>
    <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
  </div>
</aside>
<style>
  aside.ads {
    margin-bottom: 2.5rem;
    margin-top: 2.5rem;
  }
</style>

      
      <p><a href="/post/116/">前回の記事</a>では、 <a href="https://gohugo.io/templates/base/">Base Templates and Blocks</a> を使ってみました。
今回は、 <a href="https://gohugo.io/templates/homepage/">Homepage Templates</a> を使ってみます。</p>
<p>最初に、<a href="/post/115/">この記事</a>の通り、サイトとテーマの骨組みを作成しておきます。</p>
<h2 id="環境">環境</h2>
<ul>
<li>Hugo Static Site Generator v0.31.1</li>
</ul>
<h2 id="homepage-templates">Homepage Templates</h2>
<blockquote>
<p>Homepage Template</p>
<p>The homepage of a website is often formatted differently than the other pages. For this reason, Hugo makes it easy for you to define your new site’s homepage as a unique template.</p>
<p>Homepage is a Page and therefore has all the page variables and site variables available for use.</p>
<p><cite><a href="https://gohugo.io/templates/homepage/">Homepage Template | Hugo</a></cite></p>
</blockquote>
<p>サイトのトップのページはその他のページと違うレイアウトだったりしますよね。
そのためのテンプレートのようです。</p>
<h2 id="baseofhtml">baseof.html</h2>
<p><a href="/post/116/">前回の記事</a>と同じですが、基本となるレイアウトを作成しておきます。</p>
<p>次のファイル (themes/&lt;THEME&gt;/layouts/_default/baseof.html) を作成しました。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html"><span style="color:#75715e">&lt;!DOCTYPE html&gt;</span>
&lt;<span style="color:#f92672">html</span>&gt;
  &lt;<span style="color:#f92672">head</span>&gt;
    &lt;<span style="color:#f92672">meta</span> <span style="color:#a6e22e">charset</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;utf-8&#34;</span>&gt;
    &lt;<span style="color:#f92672">title</span>&gt;
      {{ block &#34;title&#34; . }}
        {{/* <span style="color:#75715e">&lt;!--</span><span style="color:#75715e"> Blocks may include default content. </span><span style="color:#75715e">--&gt;</span> */}}
        {{ .Site.Title }}
      {{ end }}
    &lt;/<span style="color:#f92672">title</span>&gt;
  &lt;/<span style="color:#f92672">head</span>&gt;
  &lt;<span style="color:#f92672">body</span>&gt;
    <span style="color:#75715e">&lt;!--</span><span style="color:#75715e"> Code that all your templates share, like a header </span><span style="color:#75715e">--&gt;</span>
    {{ block &#34;main&#34; . }}
      <span style="color:#75715e">&lt;!--</span><span style="color:#75715e"> The part of the page that begins to differ between templates </span><span style="color:#75715e">--&gt;</span>
    {{ end }}
    {{ block &#34;footer&#34; . }}
      <span style="color:#75715e">&lt;!--</span><span style="color:#75715e"> More shared code, perhaps a footer but that can be overridden if need be in  </span><span style="color:#75715e">--&gt;</span>
    {{ end }}
  &lt;/<span style="color:#f92672">body</span>&gt;
&lt;/<span style="color:#f92672">html</span>&gt;
</code></pre></div><h2 id="indexhtml">index.html</h2>
<p>サイトのトップのレイアウト (theme/&lt;THEME&gt;/layout/index.html) を次のように作成しました。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">{{ define &#34;main&#34; }}
  &lt;<span style="color:#f92672">main</span> <span style="color:#a6e22e">aria-role</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;main&#34;</span>&gt;
    &lt;<span style="color:#f92672">header</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;homepage-header&#34;</span>&gt;
      &lt;<span style="color:#f92672">h1</span>&gt;{{ .Title }}&lt;/<span style="color:#f92672">h1</span>&gt;
      {{ with .Params.subtitle }}
        &lt;<span style="color:#f92672">span</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;subtitle&#34;</span>&gt;{{ . }}&lt;/<span style="color:#f92672">span</span>&gt;
      {{ end }}
    &lt;/<span style="color:#f92672">header</span>&gt;
    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;homepage-content&#34;</span>&gt;
      <span style="color:#75715e">&lt;!--</span><span style="color:#75715e"> Note that the content for index.html, as a sort of list page, will pull from content/_index.md </span><span style="color:#75715e">--&gt;</span>
      {{ .Content }}
    &lt;/<span style="color:#f92672">div</span>&gt;
    &lt;<span style="color:#f92672">div</span>&gt;
      <span style="color:#75715e">&lt;!--</span><span style="color:#75715e"> Note that .Data.Pages is the equivalent of .Site.Pages on the homepage template. </span><span style="color:#75715e">--&gt;</span>
      {{ range first 10 .Data.Pages }}
        {{ .Render &#34;summary&#34; }}
      {{ end }}
    &lt;/<span style="color:#f92672">div</span>&gt;
  &lt;/<span style="color:#f92672">main</span>&gt;
{{ end }}
</code></pre></div><p>baseof.html の <code>{{ block &quot;main&quot; }}</code> を実装(オーバーライド)しています。</p>
<p>ここでやっていることは次の内容です。</p>
<ul>
<li>タイトルとサブタイトルの表示</li>
<li>content/_index.md のコンテンツの表示</li>
<li>最新の 10 記事の要約の表示</li>
</ul>
<h2 id="content_indexmd">content/_index.md</h2>
<p>content/_index.md ファイルを次のように作成しました。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-markdown" data-lang="markdown">---
title: Homepage Templates
subtitle: Hugo is Absurdly Fast!
date: 2018-03-28T17:47:27+09:00
---

<span style="color:#75715e">## Homepage Templates の見出し
</span><span style="color:#75715e"></span>
theme/&lt;THEME&gt;/layout/index.html の <span style="color:#e6db74">`{{ .Content }}`</span> の箇所がこの記事 (content/_index.md) の内容に置き換えられます。
</code></pre></div><p>レイアウト (index.html) の <code>{{ with .Params.subtitle }}...{{ end }}</code> の箇所がこのファイル (content/_index.md) の <code>subtitle: Hugo is Absurdly Fast!</code> の内容に置き換えらて、 HTML が生成されるようです。</p>
<p>それから、レイアウトの <code>{{ .Content }}</code> の箇所がこのファイルの内容に置き換えられて、 HTML が生成されるようです。</p>
<p>このファイルはテーマのファイルではなく、サイトのファイルです。
テーマの利用者が、サイトのトップのページにコンテンツを表示したければファイルを作成すればいいだけですし、表示したくなければファイルを作成しなければいいだけです。</p>
<p>以前からこの仕組みはあったのかな？
テーマに手を入れることなく、利用者が内容を変えられるので、便利な仕組みだと思いました。</p>
<h2 id="summaryhtml">summary.html</h2>
<blockquote>
<p>Content View Templates</p>
<p>Hugo can render alternative views of your content, which is especially useful in list and summary views.</p>
<p>These alternative content views are especially useful in list templates.</p>
<p><cite><a href="https://gohugo.io/templates/views/">Content View Templates | Hugo</a></cite></p>
</blockquote>
<p>index.html ファイルには、記事の要約を表示するために、 <code>{{ .Render &quot;summary&quot; }}</code> という記述がありました。
これは、 Content View Templates を使っているようです。
Content View Templates というのは１つの記事をどう表示するか、を決めるレイアウトのようです。
<a href="https://gohugo.io/templates/lists/">List Page Template</a> からは、記事のタイトルだけを表示する場合もあるでしょうし、記事の要約だけを表示する場合もあるでしょうし。
<a href="https://gohugo.io/templates/single-page-templates/">Single Page Templates</a> からは、記事の全文を表示するでしょうし。
そういったものを Content View Templates と呼んでいるようです。</p>
<p>そのために、もう一つ、レイアウトのファイル (summary.html) を作成します。
今回は、一番優先度の低い、基本となるファイル (theme/&lt;THEME&gt;/layouts/_default/summary.html) を作成します。</p>
<p><a href="https://gohugo.io/templates/views/#summary-html">Content View Templates | Hugo</a> を参考に次のファイル (summary.html) を作成しました。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#f92672">article</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;post&#34;</span>&gt;
  &lt;<span style="color:#f92672">header</span>&gt;
    &lt;<span style="color:#f92672">h2</span>&gt;&lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#39;{{ .Permalink }}&#39;</span>&gt;{{ .Title }}&lt;/<span style="color:#f92672">a</span>&gt;&lt;/<span style="color:#f92672">h2</span>&gt;
    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;post-meta&#34;</span>&gt;{{ .Date.Format &#34;Mon, Jan 2, 2006&#34; }} - {{ .FuzzyWordCount }} Words&lt;/<span style="color:#f92672">div</span>&gt;
  &lt;/<span style="color:#f92672">header</span>&gt;
  {{ .Summary }}
  &lt;<span style="color:#f92672">footer</span>&gt;
    &lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#39;{{ .Permalink }}&#39;</span>&gt;&lt;<span style="color:#f92672">nobr</span>&gt;Read more →&lt;/<span style="color:#f92672">nobr</span>&gt;&lt;/<span style="color:#f92672">a</span>&gt;
  &lt;/<span style="color:#f92672">footer</span>&gt;
&lt;/<span style="color:#f92672">article</span>&gt;
</code></pre></div><p>このレイアウトファイルでは次のことをしているようです。</p>
<ul>
<li>タイトルと記事へのリンクを表示</li>
<li>記事の日付と記事内のおおよその単語の数を表示</li>
<li>記事の要約を表示</li>
<li>Read more のリンクを表示</li>
</ul>
<blockquote>
<p>Hugo-defined: Automatic Summary Splitting</p>
<p>By default, Hugo automatically takes the first 70 words of your content as its summary and stores it into the .Summary page variable for use in your templates. Taking the Hugo-defined approach to summaries may save time, but it has pros and cons:</p>
<p>User-defined: Manual Summary Splitting</p>
<p>Alternatively, you may add the <!--more--> summary divider where you want to split the article. For org content, use # more where you want to split the article. Content that comes before the summary divider will be used as that content’s summary and stored in the .Summary page variable with all HTML formatting intact.</p>
<p><cite><a href="https://gohugo.io/content-management/summaries/">Content Summaries | Hugo</a></cite></p>
</blockquote>
<p>Hugo のデフォルトは、記事の最初の 70 語を要約としているようです。
記事の Markdown のファイルに <code>&lt;!--more--&gt;</code> と記述することで、明示的にそれ以前を要約として表示することができるようです。</p>
<h2 id="content">content</h2>
<p>content/post ディレクトリーに次の 2 つの examples の記事を作成しました。</p>
<ul>
<li>hello-hugo.md</li>
<li>another-post.md</li>
</ul>
<p>次のコマンドでダウンロードしました。</p>
<pre><code>$ install -d content/post
$ curl -L -o content/post/hello-hugo.md 'https://raw.githubusercontent.com/gohugoio/hugo/master/examples/blog/content/post/hello-hugo.md'
$ curl -L -o content/post/another-post.md 'https://raw.githubusercontent.com/gohugoio/hugo/master/examples/blog/content/post/another-post.md'
</code></pre><h2 id="hugo-のサーバーで確認">Hugo のサーバーで確認</h2>
<p>Hugo のサーバーで確認するために次のコマンドを入力します。</p>
<pre><code>$ hugo -t &lt;THEMENAME&gt; server
</code></pre><p>http://localhost:1313/ にアクセスします。</p>
<p>すると、 baseof.html と index.html が適用されたページが表示されます。</p>
<p><img src="/img/117-01.png" alt=""></p>
<p>次の内容が表示されていると思います。</p>
<ul>
<li>タイトルとサブタイトル</li>
<li>content/_index.md のコンテンツ</li>
<li>最新の 10 記事の要約</li>
</ul>
<h2 id="variables-and-params">Variables and Params</h2>
<p>書いておくのを忘れてました。</p>
<p>Hugo のテーマを作成するに当たって、 <code>{{ .Title }}</code> のような記述をします。
これは Hugo の変数とパラメータ－で、次のページに説明がありました。</p>
<p><a href="https://gohugo.io/variables/">Variables and Params | Hugo</a></p>
<p>たくさんあるので、都度、必要なものを調べて記述しています。</p>
<h2 id="終わり">終わり</h2>
<p>今回は、ここまでにします。</p>
<h2 id="参考">参考</h2>
<ul>
<li><a href="https://gohugo.io/templates/homepage/">Homepage Template | Hugo</a></li>
<li><a href="https://gohugo.io/templates/views/">Content View Templates | Hugo</a></li>
</ul>
<h2 id="7-april-2018-追記">7 April 2018 追記</h2>
<p>次の記事を書きました。</p>
<ul>
<li><a href="/post/126/">Hugo のテーマを作ってみます 4(Taxonomy Templates)</a></li>
</ul>
      
        <aside class="ads">
  <div>広告</div>
  <div>
    <script async="" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

    <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9305907051774965" data-ad-slot="2028899530" data-ad-format="auto"></ins>
    <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
  </div>
</aside>
<style>
  aside.ads {
    margin-bottom: 2.5rem;
    margin-top: 2.5rem;
  }
</style>

      
    </article>
  </main>

        </div><footer>
  <div>&copy; 2015 Espresso &amp; Onigiri</div>
  
  <a href="https://gohugo.io">
    <img alt="Hugo" src="/img/hugo-logo-wide.svg">
  </a>
</footer>
<style>
  footer {
    align-items: center;
    border-top: #e2e8f0 solid 1px;
    display: flex;
    flex-direction: row;
    flex-wrap: wrap;
    height: 73px;
    justify-content: space-between;
    margin: 0px auto;
    width: 992px;
  }
  footer img {
    height: 40px;
    width: 160px;
  }
  @media screen and (max-width: 992px) {
    footer {
      width: 640px;
    }
  }
</style>
</body>
</html>
